<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> ä½¿ç”¨presentingViewControllerå±æ€§å¯èƒ½ä¼šé‡åˆ°çš„å‘ Â· JOJOTOV</title><meta name="description" content="presentingViewController, presentViewController, presentedViewController"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/official_account_avatar.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://dingtz.com/atom.xml" title="JOJOTOV"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/blogLogo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/jojoting" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="https://cn.linkedin.com/in/åŒèˆŸ-ä¸-77689b10b" target="_blank" class="nav-list-link">LINKEDIN</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">ä½¿ç”¨presentingViewControllerå±æ€§å¯èƒ½ä¼šé‡åˆ°çš„å‘</h1><div class="post-info">Dec 18, 2016</div><div class="post-content"><h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p>å‡è®¾ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘æœ‰ä¸€ä¸ªæ ¹å¯¼èˆªæ§åˆ¶å™¨<code>RootNavigationController</code>ï¼Œå®ƒçš„æ ¹è§†å›¾æ§åˆ¶å™¨<code>ViewController</code>æœ‰ä¸€ä¸ªå­æ§åˆ¶å™¨<code>UINavigationController</code>ï¼Œè¿™ä¸ªå¯¼èˆªæ§åˆ¶å™¨çš„æ ¹æ§åˆ¶å™¨æ˜¯<code>FirstViewController</code>ã€‚</p>
<p>åœ¨<code>FirstViewController</code>ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæ–¹æ³•ä½¿ç”¨<code>presentModelViewController</code>çš„æ–¹å¼è·³è½¬åˆ°å¦ä¸€ä¸ªæ ¹æ§åˆ¶å™¨ä¸º<code>NextViewController</code>çš„<code>UINavigationController</code></p>
<p><img src="http://upload-images.jianshu.io/upload_images/797083-a034d3bd0033a0a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ§åˆ¶å™¨å±‚çº§"></p>
<p>å¦‚æœ<code>NextViewController</code>ä¸­è·å–å®ƒçš„<code>presentingViewController</code>å±æ€§ï¼Œç»“æœå¾—åˆ°çš„æ˜¯<code>RootNavigationController</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">2016-12-18 10:34:09.548 PresentVCDemo[27202:22455163] viewDidLoad &lt;RootNavigationController: 0x7ff29f83ba00&gt;</div><div class="line">2016-12-18 10:34:09.549 PresentVCDemo[27202:22455163] viewDidLoad &lt;ViewController: 0x7ff29de05870&gt;</div><div class="line">2016-12-18 10:34:09.572 PresentVCDemo[27202:22455163] viewDidLoad &lt;UINavigationController: 0x7ff29f022a00&gt;</div><div class="line">2016-12-18 10:34:09.573 PresentVCDemo[27202:22455163] viewDidLoad &lt;FirstViewController: 0x7ff29dc0c680&gt;</div><div class="line">2016-12-18 10:34:52.785 PresentVCDemo[27202:22455163] Presenting Controller : &lt;RootNavigationController: 0x7ff29f83ba00&gt;</div></pre></td></tr></table></figure>
<h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>è‹¹æœå®˜æ–¹çš„<a href="https://developer.apple.com/library/content/featuredarticles/ViewControllerPGforiPhoneOS/PresentingaViewController.html#//apple_ref/doc/uid/TP40007457-CH14-SW7" target="_blank" rel="external">ViewController Programming Guide</a>ä¸­å…³äº<strong>Presenting a View Controller</strong>çš„éƒ¨åˆ†æ˜¯è¿™æ ·è¯´çš„</p>
<blockquote>
<p>The view controller that calls the presentViewController:animated:completion: method may not be the one that actually performs the modal presentation. The presentation style determines how that view controller is to be presented, including the characteristics required of the presenting view controller. </p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è°ƒç”¨<code>presentViewController:animated:completion:</code>æ–¹æ³•æ—¶ï¼ŒçœŸæ­£ä½œä¸ºè·³è½¬çš„å®¹å™¨å¹¶ä¸ä¸€å®šæ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„view controllerï¼Œè€Œæ˜¯å–å†³äº<code>modalPresentationStyle</code>ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…¨å±çš„è·³è½¬å¿…é¡»ç”±ä¸€ä¸ªå…¨å±çš„view controlleræ¥å®Œæˆã€‚å¦‚æœå½“å‰çš„æ§åˆ¶å™¨ä¸èƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨æ²¿ç€è§†å›¾æ§åˆ¶å™¨çš„å±‚çº§å‘ä¸ŠæŸ¥æ‰¾ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„å±‚çº§ä¸­ï¼Œåªæœ‰ä¸¤ä¸ª<code>UINavigationController</code>æ˜¯å…¨å±çš„ï¼Œå› æ­¤ï¼Œè¿™ä¸¤ä¸ªæ§åˆ¶å™¨éƒ½æœ‰å¯èƒ½æˆä¸ºæœ€ç»ˆè·³è½¬çš„å®¹å™¨ã€‚å¯æ˜¯ä¸ºä»€ä¹ˆæœ€ç»ˆæ˜¯<code>RootNavigationController</code>å®Œæˆäº†è¿™æ¬¡è·³è½¬è€Œä¸æ˜¯<code>FirstViewController</code>çš„å¯¼èˆªæ§åˆ¶å™¨å‘¢ï¼Ÿ</p>
<p>åœ¨<a href="https://developer.apple.com/library/content/featuredarticles/ViewControllerPGforiPhoneOS/TheViewControllerHierarchy.html#//apple_ref/doc/uid/TP40007457-CH33-SW1" target="_blank" rel="external">The View Controller Hierachy</a>å…³äºPresented View Controllerä¸­æ‰¾åˆ°äº†è¿™æ ·ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>When you present a view controller, UIKit looks for a view controller that provides a suitable context for the presentation. In many cases, UIKit chooses the nearest container view controller but it might also choose the windowâ€™s root view controller.</p>
</blockquote>
<p>å› æ­¤ï¼Œåœ¨ä¸€å¼€å§‹æåˆ°çš„åœºæ™¯ä¸­ï¼ŒUIKitå¸®æˆ‘ä»¬é€‰æ‹©äº†UIWindowçš„æ ¹è§†å›¾æ§åˆ¶å™¨ï¼Œè€Œä¸æ˜¯<code>FirstViewController</code>çš„å¯¼èˆªæ§åˆ¶å™¨ã€‚</p>
<h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h3><p>åœ¨æŸäº›ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨<code>presentingViewController</code>æ‹¿åˆ°<code>FirstViewController</code>çš„å¯¼èˆªæ§åˆ¶å™¨ã€‚</p>
<p>è§£å†³è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€å¯¹å±æ€§<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="built_in">BOOL</span> definesPresentationContext;</div><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="built_in">UIModalPresentationStyle</span> modalPresentationStyle;</div></pre></td></tr></table></figure></p>
<p><code>modalPresentationStyle</code>å±æ€§å†³å®šäº†å°†è¦presentçš„æ§åˆ¶å™¨ä»¥ä½•ç§æ–¹å¼å±•ç°ï¼Œé»˜è®¤å€¼ä¸º<code>UIModalTransitionStyleCoverVertical</code></p>
<p><code>definesPresentationContext</code>å°±æœ‰ç‚¹ç¥å¥‡äº†ï¼Œä»–çš„æ³¨é‡Šæ–‡æ¡£æ˜¯è¿™ä¹ˆå†™çš„</p>
<blockquote>
<p>Determines which parent view controllerâ€™s view should be presented over for presentations of type UIModalPresentationCurrentContext.  If no ancestor view controller has this flag set, then the presenter will be the root view controller.</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼Œå¦‚æœæŠŠä¸€ä¸ªæ§åˆ¶å™¨çš„<code>definesPresentationContext</code>å±æ€§è®¾ç½®ä¸ºYESï¼Œé‚£ä¹ˆåœ¨éœ€è¦è¿›è¡Œ<code>UIModalPresentationCurrentContext</code>ç±»å‹çš„è·³è½¬çš„æ—¶å€™ï¼ŒUIKitä¼šä½¿ç”¨è§†å›¾å±‚çº§å†…çš„è¿™ä¸ªæ§åˆ¶å™¨æ¥è¿›è¡Œè·³è½¬ã€‚</p>
<p>åœ¨<code>FirstViewController</code>ä¸­åŠ å…¥ä¸‹é¢çš„ä»£ç <br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="keyword">self</span>.navigationController setDefinesPresentationContext:<span class="literal">YES</span>];</div></pre></td></tr></table></figure></p>
<p>å¹¶åœ¨è·³è½¬çš„æ—¶å€™è®¾ç½®ç›®æ ‡æ§åˆ¶å™¨çš„<code>modalPresentationStyle</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[nav setModalPresentationStyle:<span class="built_in">UIModalPresentationCurrentContext</span>];</div><div class="line">[<span class="keyword">self</span> presentViewController:nav animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹Logæ—¥å¿—<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">2016-12-18 11:59:20.041 PresentVCDemo[32336:22885768] viewDidLoad &lt;RootNavigationController: 0x7fd6f4810600&gt;</div><div class="line">2016-12-18 11:59:20.042 PresentVCDemo[32336:22885768] viewDidLoad &lt;ViewController: 0x7fd6f2c04110&gt;</div><div class="line">2016-12-18 11:59:20.052 PresentVCDemo[32336:22885768] viewDidLoad &lt;UINavigationController: 0x7fd6f381ce00&gt;</div><div class="line">2016-12-18 11:59:20.052 PresentVCDemo[32336:22885768] viewDidLoad &lt;FirstViewController: 0x7fd6f2f090c0&gt;</div><div class="line">2016-12-18 11:59:20.920 PresentVCDemo[32336:22885768] Presenting Controller : &lt;UINavigationController: 0x7fd6f381ce00&gt;</div></pre></td></tr></table></figure></p>
<p>å¤§åŠŸå‘Šæˆï¼ç°åœ¨<code>presentingViewController</code>èƒ½å¤Ÿè·å–åˆ°æˆ‘ä»¬æœŸæœ›çš„å¯¹è±¡äº†ã€‚</p>
<a id="more"></a>
</div></article></div></section><footer><div class="paginator"><a href="/2016/12/18/Linkï¼ˆç›´è¾¾é“¾æ¥ï¼‰å¼€å‘/" class="prev">PREV</a><a href="/2016/08/09/NSProxyâ€”â€”å°‘è§å´ç¥å¥‡çš„ç±»/" class="next">NEXT</a></div><div class="copyright"><p>Â© 2016 <a href="https://dingtz.com">Jojo Ding</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>